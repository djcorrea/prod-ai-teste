<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Prod.AI - Mentor Virtual</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- Fontes e √≠cones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Bibliotecas para efeitos visuais -->
    <!-- üö® GARGALOS CR√çTICOS DE PERFORMANCE:
         - THREE.js (570KB): Biblioteca 3D pesada, carregamento sem defer pode bloquear parsing
         - Vanta.js (150KB): Efeitos de part√≠culas 3D que usam GPU intensivamente
         - GSAP (400KB): Biblioteca de anima√ß√µes, pode conflitar com anima√ß√µes CSS
         Sugest√£o: Adicionar defer ou async, ou carregar condicionalmente -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.net.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- Firebase e FingerprintJS -->
    <!-- üö® POSS√çVEL OTIMIZA√á√ÉO:
         FingerprintJS pode ser pesado para detectar dispositivos
         Firebase m√≥dulos podem estar sendo importados desnecessariamente -->
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>

    <!-- Scripts funcionais existentes -->
    <script type="module" src="firebase.js"></script>
    <script src="auth.js" defer></script>
</head>
<body>
    <!-- Cen√°rio 3D -->
    <div class="cenario">
        <!-- Container para o fundo animado Vanta.js -->
        <div class="vanta-background" id="vanta-bg"></div>
        
        <!-- Plano de fundo com rede neural (mantido como fallback) -->
        <img src="fundo.webp" alt="Fundo futurista" class="fundo" />

        <!-- Elementos do cen√°rio -->
        <!-- üö® POSS√çVEL OTIMIZA√á√ÉO: 
             Verificar se todas essas imagens s√£o realmente necess√°rias
             M√∫ltiplas imagens grandes podem causar overhead de mem√≥ria -->
        <img src="robo.webp" alt="Rob√¥ futurista" class="robo" />
        <img src="mesa.webp" alt="Mesa" class="mesa" />
        <img src="caixas.webp" alt="Caixas de som principais" class="caixas" />
        <img src="notebook.webp" alt="Notebook" class="notebook" />
        <img src="teclado.webp" alt="teclado" class="teclado" />
        
        <!-- Overlay de part√≠culas extras -->
        <!-- üö® GARGALO: Div vazia que pode estar sendo usada para gerar part√≠culas CSS
             Pode estar causando renderiza√ß√µes extras -->
        <div class="particles-overlay"></div>
    </div>

    <!-- Chatbot posicionado no monitor -->
    <div class="chatbot-container" id="chatbotContainer">
        <!-- Estado Inicial (Welcome) -->
        <div class="chatbot-welcome-state" id="chatbotWelcomeState">
            <div class="chatbot-robot-wrapper">
                <img src="robo 2.webp" alt="PROD.AI Robot" class="chatbot-main-robot" id="chatbotMainRobot">
            </div>
            
            <div class="chatbot-branding" id="chatbotBranding">
                <h1 class="chatbot-main-title" id="chatbotMainTitle">PROD.AI</h1>
                <p class="chatbot-main-subtitle" id="chatbotMainSubtitle">Seu mentor virtual</p>
            </div>
            
            <div class="chatbot-input-section" id="chatbotInputSection">
                <div class="chatbot-input-field">
                    <i class="fas fa-microphone chatbot-mic-icon"></i>
                    <input type="text" 
                           class="chatbot-main-input" 
                           id="chatbotMainInput" 
                           placeholder="Digite aqui..."
                           maxlength="500">
                    <button class="chatbot-send-button" id="chatbotSendButton">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Estado Ativo (Chat) -->
        <div class="chatbot-active-state" id="chatbotActiveState">
            <div class="chatbot-header-bar" id="chatbotHeaderBar">
                <div class="chatbot-header-centered">
                    <div class="chatbot-header-text">
                        <span class="chatbot-header-name">PROD.AI</span>
                        <span class="chatbot-header-desc">Seu mentor virtual</span>
                    </div>
                </div>
            </div>
            
            <div class="chatbot-conversation-area" id="chatbotConversationArea">
                <!-- As mensagens ser√£o inseridas aqui dinamicamente -->
            </div>
            
            <div class="chatbot-input-area">
                <div class="chatbot-typing-indicator" id="chatbotTypingIndicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div class="chatbot-active-input-field">
                    <input type="text" 
                           class="chatbot-active-input" 
                           id="chatbotActiveInput" 
                           placeholder="Digite sua mensagem..."
                           maxlength="500">
                    <button class="chatbot-active-send-btn" id="chatbotActiveSendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bot√µes de a√ß√£o do chatbot -->
    <div class="chatbot-action-buttons">
        <button class="chatbot-action-btn" data-action="upgrade">
            <span>Assinar vers√£o Plus</span>
        </button>
        <button class="chatbot-action-btn" data-action="manage">
            <span>Gerenciar conta</span>
        </button>
        <button class="chatbot-action-btn" data-action="logout">
            <span>Sair</span>
        </button>
    </div>

    <!-- Script integrado com as funcionalidades existentes -->
    <!-- üö® GARGALO: script.js (1500+ linhas) carregado sem defer
         Cont√©m loops recursivos, Vanta.js initialization, e m√∫ltiplos timeouts
         Cache busting com ?v= pode estar for√ßando redownload desnecess√°rio -->
    <script src="script.js?v=20250128-1711"></script>
    <!-- üö® SCRIPTS DESABILITADOS PARA PERFORMANCE:
         plan-monitor.js cont√©m setInterval(30s) que faz consultas Firebase constantes
         force-visibility.js pode estar for√ßando reflows de layout -->
    <!-- <script src="plan-monitor.js"></script> -->
    <!-- <script src="force-visibility.js"></script> -->
    <script src="plan-monitor.js"></script>
    <script src="force-visibility.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Account Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --neon-blue: #00ffff;
            --neon-purple: #8b5cf6;
            --neon-green: #39ff14;
            --neon-pink: #ff6b9d;
            --silver: #c0c0c0;
            --gold-rose: #ff6b9d;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Fundo animado com part√≠culas melhorado */
        .background-particles {
            position: fixed;
            top: -10%;
            left: -10%;
            width: 120%;
            height: 120%;
            z-index: -1;
            background: radial-gradient(circle at 20% 20%, var(--neon-blue) 0%, transparent 60%),
                        radial-gradient(circle at 80% 80%, var(--neon-purple) 0%, transparent 60%),
                        radial-gradient(circle at 50% 60%, var(--neon-green) 0%, transparent 80%);
            opacity: 0.05;
            animation: backgroundPulse 12s ease-in-out infinite;
        }

        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--neon-blue);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
            box-shadow: 0 0 10px var(--neon-blue);
        }

        @keyframes backgroundPulse {
            0%, 100% { 
                opacity: 0.04; 
                transform: scale(1) rotate(0deg);
            }
            33% { 
                opacity: 0.08; 
                transform: scale(1.02) rotate(1deg);
            }
            66% { 
                opacity: 0.06; 
                transform: scale(0.98) rotate(-1deg);
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px); opacity: 0.5; }
            25% { transform: translateY(-20px) translateX(10px); opacity: 1; }
            50% { transform: translateY(-10px) translateX(-10px); opacity: 0.8; }
            75% { transform: translateY(-15px) translateX(5px); opacity: 0.6; }
        }

        /* Header futurista */
        .header {
            background: linear-gradient(135deg, var(--glass-bg), rgba(0, 255, 255, 0.1));
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 2rem 0;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            animation: scanLine 3s ease-in-out infinite;
        }

        @keyframes scanLine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px var(--neon-blue);
            position: relative;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 0 20px var(--neon-purple);
            position: relative;
        }

        .user-avatar::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple), var(--neon-pink));
            z-index: -1;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Container principal */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 4rem 2rem;
            position: relative;
        }

        .page-title {
            font-family: 'Orbitron', monospace;
            font-size: 3rem;
            font-weight: 900;
            text-align: center;
            margin-bottom: 3rem;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple), var(--neon-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 50px var(--neon-blue);
            position: relative;
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-blue), transparent);
            box-shadow: 0 0 10px var(--neon-blue);
        }

        /* Grid de cards */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        /* Card futurista */
        .card {
            background: linear-gradient(135deg, var(--glass-bg), rgba(139, 92, 246, 0.05));
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform-style: preserve-3d;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple), var(--neon-green));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            transform: translateY(-10px) rotateX(5deg);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.2),
                        0 0 50px rgba(139, 92, 246, 0.1);
            border-color: var(--neon-blue);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--neon-blue);
            text-shadow: 0 0 20px var(--neon-blue);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-icon {
            width: 24px;
            height: 24px;
            background: var(--neon-blue);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px var(--neon-blue);
        }

        /* Formul√°rios futuristas */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'Exo 2', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--neon-blue);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.08);
        }

        .form-input::placeholder {
            color: var(--text-secondary);
        }

        /* Bot√µes futuristas */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            color: var(--text-primary);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 255, 255, 0.5);
        }

        .btn-secondary {
            background: linear-gradient(45deg, var(--bg-tertiary), var(--silver));
            color: var(--text-primary);
            box-shadow: 0 5px 15px rgba(192, 192, 192, 0.3);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff1744, #ff6b9d);
            color: var(--text-primary);
            box-shadow: 0 5px 15px rgba(255, 23, 68, 0.3);
        }

        .btn-full {
            width: 100%;
        }

        /* Badge de plano */
        .plan-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        .plan-pro {
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
            color: var(--text-primary);
            box-shadow: 0 0 20px var(--neon-purple);
        }

        /* Estilos para dados da entrevista */
        .interview-data {
            margin-bottom: 1.5rem;
        }

        .interview-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .interview-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--neon-blue);
        }

        .interview-item .form-label {
            min-width: 120px;
            margin-bottom: 0;
            font-size: 0.8rem;
        }

        .data-display {
            flex: 1;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.5rem;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 5px;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .data-display.editing {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--neon-blue);
        }

        .btn-edit {
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            border-radius: 5px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .btn-edit:hover {
            background: var(--neon-blue);
            color: var(--bg-primary);
            border-color: var(--neon-blue);
            box-shadow: 0 0 10px var(--neon-blue);
        }

        .personalization-status {
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(57, 255, 20, 0.1);
            border: 1px solid rgba(57, 255, 20, 0.3);
            border-radius: 10px;
        }

        .personalization-status.free {
            background: rgba(255, 107, 157, 0.1);
            border-color: rgba(255, 107, 157, 0.3);
        }

        .edit-field-input {
            width: 100%;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--neon-blue);
            border-radius: 5px;
            color: var(--text-primary);
            font-family: 'Exo 2', sans-serif;
        }

        .edit-field-input:focus {
            outline: none;
            box-shadow: 0 0 10px var(--neon-blue);
        }

        .edit-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn-save-field, .btn-cancel-field {
            padding: 0.3rem 0.8rem;
            border: none;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-save-field {
            background: var(--neon-green);
            color: var(--bg-primary);
        }

        .btn-cancel-field {
            background: var(--text-secondary);
            color: var(--bg-primary);
        }
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--neon-green);
            box-shadow: 0 0 10px var(--neon-green);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Modal futurista */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            animation: modalAppear 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes modalAppear {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, var(--bg-secondary), rgba(139, 92, 246, 0.1));
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            position: relative;
            backdrop-filter: blur(20px);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: scale(0.8) translateY(50px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .modal-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--neon-blue);
            margin-bottom: 1rem;
            text-align: center;
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        /* Loading spinner futurista */
        .loading {
            display: none;
            width: 40px;
            height: 40px;
            border: 3px solid var(--glass-border);
            border-top: 3px solid var(--neon-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Se√ß√£o de suporte */
        .support-contact {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--glass-bg), rgba(57, 255, 20, 0.05));
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            margin-top: 2rem;
        }

        .support-email {
            font-size: 1.2rem;
            color: var(--neon-green);
            text-decoration: none;
            font-weight: 600;
            text-shadow: 0 0 20px var(--neon-green);
        }

        /* Responsividade melhorada */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem 1rem;
            }

            .page-title {
                font-size: 2.2rem;
                margin-bottom: 2rem;
            }

            .cards-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .header-content {
                flex-direction: row;
                justify-content: space-between;
                gap: 1rem;
                padding: 0 1rem;
            }

            .logo {
                font-size: 1.8rem;
            }

            .user-info {
                flex-direction: row;
                gap: 0.8rem;
            }

            .user-avatar {
                width: 45px;
                height: 45px;
                font-size: 0.9rem;
            }

            .modal-content {
                padding: 1.5rem;
                margin: 1rem;
                max-width: calc(100vw - 2rem);
            }

            .modal-buttons {
                flex-direction: column;
                gap: 0.8rem;
            }

            .interview-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.8rem;
                padding: 1rem;
            }

            .interview-item .form-label {
                min-width: auto;
                width: 100%;
            }

            .data-display {
                width: 100%;
            }

            .btn-edit {
                align-self: flex-end;
                margin-top: 0.5rem;
            }

            .edit-buttons {
                width: 100%;
                justify-content: space-between;
            }

            .form-group {
                margin-bottom: 1.2rem;
            }

            .form-input {
                padding: 0.9rem;
                font-size: 1rem;
            }

            .btn {
                padding: 0.9rem 1.8rem;
                font-size: 0.95rem;
                min-height: 48px;
            }

            .status-indicator {
                justify-content: center;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 1.5rem 0;
            }

            .logo {
                font-size: 1.6rem;
            }

            .page-title {
                font-size: 1.8rem;
                margin-bottom: 1.5rem;
            }

            .card {
                padding: 1.2rem;
                margin-bottom: 1rem;
            }

            .card-title {
                font-size: 1.3rem;
                margin-bottom: 1.2rem;
            }

            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
                min-height: 44px;
            }

            .user-info {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
                text-align: center;
            }

            .user-avatar {
                width: 40px;
                height: 40px;
                font-size: 0.8rem;
            }

            .interview-item {
                padding: 0.8rem;
            }

            .form-input {
                padding: 0.8rem;
                font-size: 0.95rem;
            }

            .modal-content {
                padding: 1.2rem;
                margin: 0.5rem;
            }

            .modal-title {
                font-size: 1.3rem;
            }

            .support-email {
                font-size: 1rem;
                word-break: break-all;
            }
        }

        @media (max-width: 360px) {
            .container {
                padding: 1rem 0.8rem;
            }

            .header-content {
                padding: 0 0.8rem;
                flex-direction: column;
                text-align: center;
                gap: 0.8rem;
            }

            .logo {
                font-size: 1.4rem;
            }

            .page-title {
                font-size: 1.6rem;
                margin-bottom: 1.2rem;
            }

            .card {
                padding: 1rem;
                border-radius: 15px;
            }

            .card-title {
                font-size: 1.2rem;
                flex-direction: column;
                gap: 0.3rem;
                text-align: center;
            }

            .btn {
                padding: 0.7rem 1.2rem;
                font-size: 0.85rem;
                min-height: 42px;
            }

            .interview-item {
                padding: 0.7rem;
                flex-direction: column;
                gap: 0.6rem;
            }

            .interview-item .form-label {
                font-size: 0.75rem;
            }

            .data-display {
                font-size: 0.9rem;
                padding: 0.6rem;
            }

            .btn-edit {
                padding: 0.4rem;
                font-size: 0.8rem;
            }

            .form-input {
                padding: 0.7rem;
                font-size: 0.9rem;
            }

            .modal-content {
                padding: 1rem;
                margin: 0.3rem;
            }

            .plan-badge {
                font-size: 0.7rem;
                padding: 0.4rem 0.8rem;
            }

            .edit-buttons {
                flex-direction: row;
                gap: 0.4rem;
            }

            .btn-save-field, .btn-cancel-field {
                padding: 0.4rem 0.6rem;
                font-size: 0.75rem;
                flex: 1;
            }
        }

        /* Melhorias para touch devices */
        @media (hover: none) and (pointer: coarse) {
            .btn:hover {
                transform: none;
            }

            .card:hover {
                transform: none;
            }

            .btn:active {
                transform: scale(0.98);
            }

            .card {
                transition: none;
            }

            .btn-edit:hover {
                background: rgba(255, 255, 255, 0.1);
                color: var(--text-secondary);
                border-color: var(--glass-border);
                box-shadow: none;
            }

            .btn-edit:active {
                background: var(--neon-blue);
                color: var(--bg-primary);
                border-color: var(--neon-blue);
            }
        }

        /* Bot√£o de voltar ao chat - Estilo futurista melhorado */
        .back-to-chat-container {
            display: flex;
            justify-content: center;
            margin-top: 3rem;
            padding-bottom: 2rem;
        }

        .btn-back-to-chat {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem 2.5rem;
            background: linear-gradient(135deg, var(--glass-bg), rgba(0, 255, 255, 0.1));
            backdrop-filter: blur(20px);
            border: 1px solid var(--neon-blue);
            border-radius: 20px;
            color: var(--text-primary);
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2);
            text-decoration: none;
            min-width: 280px;
            transform-style: preserve-3d;
        }

        .btn-back-to-chat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple), var(--neon-green));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn-back-to-chat::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .btn-back-to-chat:hover {
            transform: translateY(-5px) rotateX(2deg);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.3),
                        0 0 50px rgba(139, 92, 246, 0.1);
            border-color: var(--neon-blue);
        }

        .btn-back-to-chat:hover::before {
            opacity: 1;
        }

        .btn-back-to-chat:hover::after {
            left: 100%;
        }

        .btn-back-to-chat:active {
            transform: translateY(-2px) rotateX(1deg);
        }

        .chat-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
            position: relative;
        }

        .chat-icon::before {
            content: '';
            position: absolute;
            inset: -1px;
            border-radius: 12px;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple), var(--neon-green));
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn-back-to-chat:hover .chat-icon::before {
            opacity: 1;
        }

        .chat-text {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            flex: 1;
        }

        .chat-main {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
            background: linear-gradient(45deg, var(--neon-blue), var(--text-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .chat-sub {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 400;
            opacity: 0.8;
        }

        .chat-arrow {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--neon-blue);
            transition: all 0.3s ease;
            text-shadow: 0 0 10px var(--neon-blue);
        }

        .btn-back-to-chat:hover .chat-arrow {
            transform: translateX(8px);
            color: var(--neon-green);
            text-shadow: 0 0 15px var(--neon-green);
        }

        /* Responsividade melhorada para o bot√£o */
        @media (max-width: 768px) {
            .back-to-chat-container {
                margin-top: 2rem;
                padding: 0 1rem 2rem;
            }

            .btn-back-to-chat {
                min-width: 250px;
                padding: 1.3rem 2rem;
                gap: 0.8rem;
            }

            .chat-icon {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
                border-radius: 10px;
            }

            .chat-main {
                font-size: 1.1rem;
            }

            .chat-sub {
                font-size: 0.85rem;
            }

            .chat-arrow {
                font-size: 1.3rem;
            }
        }

        @media (max-width: 480px) {
            .back-to-chat-container {
                padding: 0 0.5rem 1.5rem;
            }

            .btn-back-to-chat {
                min-width: 220px;
                padding: 1.2rem 1.5rem;
                gap: 0.7rem;
                border-radius: 15px;
            }

            .chat-icon {
                width: 42px;
                height: 42px;
                font-size: 1.1rem;
                border-radius: 8px;
            }

            .chat-main {
                font-size: 1rem;
                margin-bottom: 0.2rem;
            }

            .chat-sub {
                font-size: 0.8rem;
            }

            .chat-arrow {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 360px) {
            .back-to-chat-container {
                margin-top: 1.5rem;
                padding-bottom: 1rem;
            }

            .btn-back-to-chat {
                min-width: 200px;
                padding: 1rem 1.2rem;
                gap: 0.6rem;
                flex-direction: row;
                justify-content: center;
            }

            .chat-icon {
                width: 38px;
                height: 38px;
                font-size: 1rem;
                border-radius: 8px;
            }

            .chat-text {
                align-items: flex-start;
                text-align: left;
            }

            .chat-main {
                font-size: 0.95rem;
            }

            .chat-sub {
                font-size: 0.75rem;
            }

            .chat-arrow {
                font-size: 1.1rem;
            }
        }

        /* Layout especial para telas muito pequenas */
        @media (max-width: 320px) {
            .btn-back-to-chat {
                min-width: 180px;
                padding: 0.9rem 1rem;
                flex-direction: column;
                text-align: center;
                gap: 0.8rem;
            }

            .chat-text {
                align-items: center;
            }

            .chat-arrow {
                display: none;
            }

            .chat-main {
                font-size: 0.9rem;
            }

            .chat-sub {
                font-size: 0.7rem;
            }
        }

        /* Melhorias para touch devices */
        @media (hover: none) and (pointer: coarse) {
            .btn-back-to-chat:hover {
                transform: none;
            }

            .btn-back-to-chat:active {
                transform: scale(0.98);
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(0, 255, 255, 0.15));
            }

            .btn-back-to-chat:hover .chat-arrow {
                transform: none;
            }

            .btn-back-to-chat:active .chat-arrow {
                transform: translateX(5px);
            }
        }
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }

            .background-particles {
                display: none;
            }
        }
    </style>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
    <script src="auth.js" defer></script>
</head>
<body>
    <!-- Fundo animado -->
    <div class="background-particles">
        <div class="particles"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">PROD.AI</div>
            <div class="user-info">
                <div class="user-avatar">JD</div>
                <div>
                    <div style="font-weight: 600;">John Doe</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">Pro Member</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Container principal -->
    <div class="container">
        <h1 class="page-title">GERENCIAR CONTA</h1>

        <!-- Grid de cards -->
        <div class="cards-grid">
            <!-- Personaliza√ß√£o -->
            <div class="card">
                <h2 class="card-title">
                    <div class="card-icon">‚öôÔ∏è</div>
                    Personaliza√ß√£o do Chat
                </h2>
                
                <!-- Dados da Entrevista -->
                <div id="interviewData" class="interview-data">
                    <div class="interview-item">
                        <label class="form-label">Nome Art√≠stico</label>
                        <div class="data-display" data-field="artistName" id="nomeArtistico">DJ Phoenix</div>
                        <button class="btn-edit" onclick="editField('artistName')">‚úèÔ∏è</button>
                    </div>
                    
                    <div class="interview-item">
                        <label class="form-label">Estilo Musical</label>
                        <div class="data-display" data-field="musicStyle" id="estiloMusical">Progressive House, Deep House</div>
                        <button class="btn-edit" onclick="editField('musicStyle')">‚úèÔ∏è</button>
                    </div>
                    
                    <div class="interview-item">
                        <label class="form-label">Maior Dificuldade</label>
                        <div class="data-display" data-field="difficulty" id="dificuldade">Criar transi√ß√µes suaves entre faixas</div>
                        <button class="btn-edit" onclick="editField('difficulty')">‚úèÔ∏è</button>
                    </div>
                    
                    <div class="interview-item">
                        <label class="form-label">DAW Utilizada</label>
                        <div class="data-display" data-field="daw" id="dawUtilizada">Ableton Live 11</div>
                        <button class="btn-edit" onclick="editField('daw')">‚úèÔ∏è</button>
                    </div>
                    
                    <div class="interview-item">
                        <label class="form-label">N√≠vel T√©cnico</label>
                        <div class="data-display" data-field="technicalLevel">Intermedi√°rio</div>
                        <button class="btn-edit" onclick="editField('technicalLevel')">‚úèÔ∏è</button>
                    </div>
                    
                    <div class="interview-item">
                        <label class="form-label">Sobre Voc√™</label>
                        <div class="data-display" data-field="aboutYou">Produtor h√° 3 anos, focado em m√∫sica eletr√¥nica para festas</div>
                        <button class="btn-edit" onclick="editField('aboutYou')">‚úèÔ∏è</button>
                    </div>
                </div>

                <!-- Status de Personaliza√ß√£o -->
                <div class="personalization-status">
                    <div class="status-indicator" id="personalizationStatus">
                        <div class="status-dot"></div>
                        <span>Personaliza√ß√£o ativa (PLUS)</span>
                    </div>
                </div>

                <button class="btn btn-secondary btn-full" onclick="retakeInterview()">
                    üîÑ Refazer Entrevista Completa
                </button>
                <button class="btn btn-primary btn-full" style="margin-top: 0.5rem;" onclick="savePersonalization()">
                    üíæ Salvar Altera√ß√µes
                </button>
            </div>

            <!-- Seguran√ßa -->
            <div class="card" id="securityCard">
                <h2 class="card-title">
                    <div class="card-icon">üîí</div>
                    Seguran√ßa
                </h2>
                <div class="form-group">
                    <label class="form-label">Senha Atual</label>
                    <input type="password" class="form-input" id="senhaAtual" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
                </div>
                <div class="form-group">
                    <label class="form-label">Nova Senha</label>
                    <input type="password" class="form-input" id="novaSenha" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label class="form-label">Confirmar Nova Senha</label>
                    <input type="password" class="form-input" id="confirmarSenha" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password">
                </div>
                <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 1rem;">
                    üí° A senha deve ter pelo menos 8 caracteres, incluindo mai√∫scula, min√∫scula e n√∫mero
                </div>
                <button class="btn btn-primary btn-full" onclick="changePassword()">
                    üîê Alterar Senha
                </button>
            </div>

            <!-- Assinatura -->
            <div class="card">
                <h2 class="card-title">
                    <div class="card-icon">üíé</div>
                    Plano & Assinatura
                </h2>
                <div class="plan-badge plan-pro">PRO MEMBER</div>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>Ativa at√© 20/07/2026</span>
                </div>
                <div style="margin: 1rem 0; color: var(--text-secondary);">
                    <p>‚úì Acesso ilimitado</p>
                    <p>‚úì Respostas priorit√°rias</p>
                    <p>‚úì Recursos avan√ßados</p>
                </div>
                <button class="btn btn-danger btn-full" onclick="cancelSubscription()">
                    Cancelar Assinatura
                </button>
            </div>

            <!-- Informa√ß√µes Pessoais -->
            <div class="card" id="personalCard">
                <h2 class="card-title">
                    <div class="card-icon">üë§</div>
                    Informa√ß√µes Pessoais
                </h2>
                <div class="form-group">
                    <label class="form-label">E-mail</label>
                    <div style="display: flex; gap: 0.5rem;">
                        <input type="email" class="form-input" value="john.doe@email.com" style="flex: 1;" id="emailInput" autocomplete="email">
                        <button class="btn btn-secondary" onclick="changeEmail()">‚úèÔ∏è Alterar</button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Telefone (Opcional)</label>
                    <input type="tel" class="form-input" placeholder="+55 (11) 99999-9999" autocomplete="tel">
                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.3rem;">
                        üí° Formato: +55 (11) 99999-9999 ou apenas 11999999999
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Foto de Perfil</label>
                    <input type="file" class="form-input" accept="image/*">
                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.3rem;">
                        üì∏ M√°ximo 5MB - JPG, PNG ou GIF
                    </div>
                </div>
                <button class="btn btn-primary btn-full" onclick="savePersonalInfo()">
                    üíæ Salvar Altera√ß√µes
                </button>
            </div>

            <!-- Suporte -->
            <div class="card">
                <h2 class="card-title">
                    <div class="card-icon">üéß</div>
                    Suporte
                </h2>
                <div style="text-align: center; margin: 2rem 0;">
                    <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                        Precisa de ajuda? Entre em contato conosco:
                    </p>
                    <a href="mailto:prod.ai@gmail.com" class="support-email">
                        prod.ai@gmail.com
                    </a>
                </div>
                <div style="margin-top: 2rem;">
                    <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5;">
                        üìû Suporte telef√¥nico: Seg-Sex, 9h-18h<br>
                        üí¨ Chat online: 24/7<br>
                        ‚ö° Resposta em at√© 2 horas
                    </p>
                </div>
            </div>

            <!-- Encerramento de Conta -->
            <div class="card">
                <h2 class="card-title">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    Zona de Perigo
                </h2>
                <div style="background: rgba(255, 23, 68, 0.1); border: 1px solid rgba(255, 23, 68, 0.3); border-radius: 10px; padding: 1rem; margin-bottom: 1rem;">
                    <h4 style="color: #ff1744; margin-bottom: 0.5rem;">‚ö†Ô∏è Aten√ß√£o!</h4>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">
                        Esta a√ß√£o √© irrevers√≠vel. Todos os seus dados ser√£o permanentemente deletados.
                    </p>
                </div>
                <button class="btn btn-danger btn-full" onclick="deleteAccount()">
                    Excluir Conta Permanentemente
                </button>
            </div>
        </div>

        <!-- Bot√£o de retorno ao chat -->
        <div class="back-to-chat-container">
            <button class="btn-back-to-chat" onclick="backToChat()">
                <div class="chat-icon">üí¨</div>
                <div class="chat-text">
                    <span class="chat-main">Voltar ao Chat</span>
                    <span class="chat-sub">Continue sua conversa</span>
                </div>
                <div class="chat-arrow">‚Üí</div>
            </button>
        </div>
    </div>

    <!-- Modal de Upgrade (para usu√°rios FREE) -->
    <div class="modal" id="upgradeModal">
        <div class="modal-content">
            <h3 class="modal-title" style="color: var(--neon-purple);">üöÄ Upgrade Necess√°rio</h3>
            <div style="text-align: center; margin: 1rem 0;">
                <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                    A personaliza√ß√£o avan√ßada √© exclusiva para usu√°rios <strong style="color: var(--neon-purple);">PLUS</strong>
                </p>
                <div style="background: rgba(139, 92, 246, 0.1); border-radius: 10px; padding: 1rem; margin: 1rem 0;">
                    <h4 style="color: var(--neon-purple); margin-bottom: 0.5rem;">Benef√≠cios PLUS:</h4>
                    <p style="font-size: 0.9rem; color: var(--text-secondary);">
                        ‚ú® Entrevistas ilimitadas<br>
                        ü§ñ Personaliza√ß√£o do chat<br>
                        üéµ Recursos avan√ßados<br>
                        ‚ö° Suporte priorit√°rio
                    </p>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('upgradeModal')">Agora N√£o</button>
                <button class="btn btn-primary" onclick="upgradeAccount()">üöÄ Fazer Upgrade</button>
            </div>
        </div>
    </div>
    <div class="modal" id="retakeModal">
        <div class="modal-content">
            <h3 class="modal-title">Refazer Entrevista?</h3>
            <p style="text-align: center; margin-bottom: 1rem; color: var(--text-secondary);">
                Isso resetar√° suas configura√ß√µes de personaliza√ß√£o atuais.
            </p>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('retakeModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="confirmRetake()">Continuar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Cancelamento de Assinatura -->
    <div class="modal" id="cancelModal">
        <div class="modal-content">
            <h3 class="modal-title">Cancelar Assinatura?</h3>
            <p style="text-align: center; margin-bottom: 1rem; color: var(--text-secondary);">
                Voc√™ perder√° acesso aos recursos PRO. Deseja continuar?
            </p>
            <div style="background: rgba(255, 23, 68, 0.1); border-radius: 10px; padding: 1rem; margin: 1rem 0;">
                <p style="font-size: 0.9rem; color: var(--text-secondary);">
                    ‚Ä¢ Acesso at√© 20/07/2026<br>
                    ‚Ä¢ Sem cobran√ßa futura<br>
                    ‚Ä¢ Pode reativar a qualquer momento
                </p>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('cancelModal')">Manter Assinatura</button>
                <button class="btn btn-danger" onclick="confirmCancel()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Verifica√ß√£o de E-mail -->
    <div class="modal" id="emailModal">
        <div class="modal-content">
            <h3 class="modal-title">Verificar E-mail</h3>
            <p style="text-align: center; margin-bottom: 1rem; color: var(--text-secondary);">
                Digite o c√≥digo enviado para seu e-mail:
            </p>
            <div class="form-group">
                <input type="text" class="form-input" placeholder="123456" maxlength="6" style="text-align: center; font-size: 1.2rem; letter-spacing: 3px;">
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('emailModal')">Cancelar</button>
                <button class="btn btn-primary" onclick="confirmEmailVerification()">Verificar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Exclus√£o de Conta -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <h3 class="modal-title" style="color: #ff1744;">‚ö†Ô∏è EXCLUIR CONTA</h3>
            <div style="background: rgba(255, 23, 68, 0.1); border-radius: 10px; padding: 1rem; margin: 1rem 0;">
                <h4 style="color: #ff1744; margin-bottom: 0.5rem;">Esta a√ß√£o √© irrevers√≠vel!</h4>
                <p style="font-size: 0.9rem; color: var(--text-secondary);">
                    ‚Ä¢ Todos os dados ser√£o deletados<br>
                    ‚Ä¢ Hist√≥rico de conversas perdido<br>
                    ‚Ä¢ Assinatura cancelada imediatamente<br>
                    ‚Ä¢ N√£o √© poss√≠vel recuperar a conta
                </p>
            </div>
            <div class="form-group">
                <label class="form-label">Digite sua senha para confirmar:</label>
                <input type="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <div class="form-group">
                <label class="form-label">C√≥digo de verifica√ß√£o (enviado por e-mail):</label>
                <input type="text" class="form-input" placeholder="123456" maxlength="6">
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal('deleteModal')">Cancelar</button>
                <button class="btn btn-danger" onclick="confirmDelete()">EXCLUIR PERMANENTEMENTE</button>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div class="loading" id="loading"></div>

    <script>
        const userData = {
            userType: 'FREE',
            interviewData: {
                artistName: '',
                musicStyle: '',
                difficulty: '',
                daw: '',
                technicalLevel: '',
                aboutYou: ''
            },
            personalInfo: {
                email: '',
                phone: '',
                avatar: null
            }
        };

        // Fun√ß√£o para editar campos individuais
        function editField(fieldName) {
            const dataDisplay = document.querySelector(`[data-field="${fieldName}"]`);
            const currentValue = dataDisplay.textContent;
            const isTextarea = fieldName === 'aboutYou' || fieldName === 'difficulty';
            
            const inputElement = isTextarea ? 
                `<textarea class="edit-field-input" rows="2">${currentValue}</textarea>` :
                `<input type="text" class="edit-field-input" value="${currentValue}">`;
            
            dataDisplay.innerHTML = `
                ${inputElement}
                <div class="edit-buttons" style="margin-top: 0.5rem;">
                    <button class="btn-save-field" onclick="saveField('${fieldName}')">‚úì Salvar</button>
                    <button class="btn-cancel-field" onclick="cancelEdit('${fieldName}', '${currentValue}')">‚úó Cancelar</button>
                </div>
            `;
            dataDisplay.classList.add('editing');
            dataDisplay.querySelector('.edit-field-input').focus();
        }

        function saveField(fieldName) {
            const dataDisplay = document.querySelector(`[data-field="${fieldName}"]`);
            const input = dataDisplay.querySelector('.edit-field-input');
            const newValue = input.value.trim();
            
            if (newValue) {
                userData.interviewData[fieldName] = newValue;
                apiRequest('/api/user/interview-data', { method: 'PUT', body: { [fieldName]: newValue } })
                    .then(() => {
                        dataDisplay.innerHTML = newValue;
                        dataDisplay.classList.remove('editing');
                        showNotification('‚úÖ Campo atualizado com sucesso!', 'success');
                        if (userData.userType === 'PLUS') {
                            updateChatPersonalization();
                        }
                    })
                    .catch(() => {
                        showNotification('‚ùå Erro ao salvar campo', 'error');
                    });
            } else {
                showNotification('‚ö†Ô∏è Campo n√£o pode estar vazio', 'error');
            }
        }

        function cancelEdit(fieldName, originalValue) {
            const dataDisplay = document.querySelector(`[data-field="${fieldName}"]`);
            dataDisplay.innerHTML = originalValue;
            dataDisplay.classList.remove('editing');
        }

        function updateChatPersonalization() {
            console.log('ü§ñ Atualizando personaliza√ß√£o do chat com base na entrevista...');
            // Aqui seria feita a integra√ß√£o com o backend para atualizar a personaliza√ß√£o
        }

        // Refazer entrevista
        function retakeInterview() {
            if (userData.userType === 'FREE') {
                openModal('upgradeModal');
                return;
            }
            openModal('retakeModal');
        }

        function confirmRetake() {
            closeModal('retakeModal');
            apiRequest('/api/user/retake-interview', { method: 'POST' })
                .then(() => {
                    showNotification('üöÄ Redirecionando para nova entrevista...', 'info');
                    window.location.href = 'entrevista.html?retake=true';
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao acessar entrevista', 'error');
                });
        }

        // Salvar personaliza√ß√£o com valida√ß√£o completa
        function savePersonalization() {
            if (userData.userType === 'FREE') {
                showNotification('‚ö†Ô∏è Personaliza√ß√£o limitada na vers√£o FREE', 'warning');
                return;
            }

            apiRequest('/api/user/interview-data', { method: 'PUT', body: userData.interviewData })
                .then(() => {
                    showNotification('‚úÖ Personaliza√ß√£o salva com sucesso!', 'success');
                    updateChatPersonalization();
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao salvar personaliza√ß√£o. Tente novamente.', 'error');
                });
        }

        // Alterar senha com valida√ß√£o robusta
        function changePassword() {
            const currentPassword = document.querySelector('#securityCard input[type="password"]:nth-of-type(1)').value;
            const newPassword = document.querySelector('#securityCard input[type="password"]:nth-of-type(2)').value;
            const confirmPassword = document.querySelector('#securityCard input[type="password"]:nth-of-type(3)').value;
            
            // Valida√ß√µes
            if (!currentPassword || !newPassword || !confirmPassword) {
                showNotification('‚ö†Ô∏è Preencha todos os campos de senha', 'warning');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showNotification('‚ö†Ô∏è Nova senha e confirma√ß√£o n√£o coincidem', 'error');
                return;
            }
            
            if (newPassword.length < 8) {
                showNotification('‚ö†Ô∏è Nova senha deve ter pelo menos 8 caracteres', 'error');
                return;
            }

            if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(newPassword)) {
                showNotification('‚ö†Ô∏è Senha deve conter mai√∫scula, min√∫scula e n√∫mero', 'error');
                return;
            }
            
            apiRequest('/api/user/change-password', {
                method: 'POST',
                body: { currentPassword, newPassword }
            })
                .then(() => {
                    document.querySelectorAll('#securityCard input[type="password"]').forEach(input => input.value = '');
                    showNotification('‚úÖ Senha alterada com sucesso!', 'success');
                    playSound('success');
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao alterar senha. Verifique a senha atual.', 'error');
                });
        }

        // Cancelar assinatura com redirecionamento real
        function confirmCancel() {
            closeModal('cancelModal');
            apiRequest('/api/user/cancel-subscription', { method: 'POST' })
                .then(() => {
                    showNotification('‚úÖ Assinatura cancelada com sucesso!', 'success');
                    document.querySelector('.plan-badge').textContent = 'FREE MEMBER';
                    document.querySelector('.plan-badge').className = 'plan-badge';
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao cancelar assinatura', 'error');
                });
        }

        // Salvar informa√ß√µes pessoais com valida√ß√£o completa
        function savePersonalInfo() {
            const email = document.getElementById('emailInput').value.trim();
            const phone = document.querySelector('#personalCard input[type="tel"]').value.trim();
            const avatar = document.querySelector('#personalCard input[type="file"]').files[0];
            
            // Valida√ß√£o de e-mail
            if (!email || !validateEmail(email)) {
                showNotification('‚ö†Ô∏è Digite um e-mail v√°lido', 'error');
                document.getElementById('emailInput').focus();
                return;
            }

            // Valida√ß√£o de telefone (se preenchido)
            if (phone && !validatePhone(phone)) {
                showNotification('‚ö†Ô∏è Formato de telefone inv√°lido', 'error');
                return;
            }
            
            const body = { email, phone };
            apiRequest('/api/user/profile', { method: 'PUT', body })
                .then(() => {
                    userData.personalInfo.email = email;
                    userData.personalInfo.phone = phone;

                    if (avatar) {
                        userData.personalInfo.avatar = avatar.name;
                    }

                    showNotification('‚úÖ Informa√ß√µes pessoais atualizadas com sucesso!', 'success');
                    playSound('success');
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao salvar informa√ß√µes. Tente novamente.', 'error');
                });
        }

        // Valida√ß√£o de telefone
        function validatePhone(phone) {
            // Regex para telefones brasileiros
            const phoneRegex = /^(\+55\s?)?(\(?\d{2}\)?\s?)?\d{4,5}-?\d{4}$/;
            return phoneRegex.test(phone);
        }

        // Excluir conta com processo de seguran√ßa
        function confirmDelete() {
            const password = document.querySelector('#deleteModal input[type="password"]').value;
            const code = document.querySelector('#deleteModal input[type="text"]').value;
            
            if (!password) {
                showNotification('‚ö†Ô∏è Digite sua senha para confirmar', 'error');
                document.querySelector('#deleteModal input[type="password"]').focus();
                return;
            }
            
            if (code.length !== 6) {
                showNotification('‚ö†Ô∏è Digite o c√≥digo de verifica√ß√£o de 6 d√≠gitos', 'error');
                document.querySelector('#deleteModal input[type="text"]').focus();
                return;
            }
            
            closeModal('deleteModal');
            apiRequest('/api/user/account', {
                method: 'DELETE',
                body: { password, code }
            })
                .then(() => {
                    showNotification('‚ö†Ô∏è Conta exclu√≠da permanentemente!', 'error');
                    setTimeout(() => { window.location.href = '/login?account_deleted=true'; }, 2000);
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao excluir conta. Verifique os dados.', 'error');
                });
        }

        // Refazer entrevista com verifica√ß√£o PLUS
        function retakeInterview() {
            if (userData.userType === 'FREE') {
                openModal('upgradeModal');
                return;
            }
            openModal('retakeModal');
        }

        function confirmRetake() {
            closeModal('retakeModal');
            apiRequest('/api/user/retake-interview', { method: 'POST' })
                .then(() => {
                    showNotification('üöÄ Redirecionando para nova entrevista...', 'info');
                    window.location.href = 'entrevista.html?retake=true';
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao acessar entrevista', 'error');
                });
        }

        // Alterar e-mail com valida√ß√£o
        function changeEmail() {
            const emailInput = document.getElementById('emailInput');
            const currentEmail = emailInput.value;
            
            const newEmail = prompt('üíå Digite o novo e-mail:', currentEmail);
            
            if (newEmail && newEmail !== currentEmail) {
                if (validateEmail(newEmail)) {
                    emailInput.value = newEmail;
                    showNotification('üìß E-mail atualizado! Clique em "Salvar Altera√ß√µes" para confirmar.', 'info');
                    
                    // Destacar visualmente que h√° mudan√ßas n√£o salvas
                    emailInput.style.borderColor = 'var(--neon-green)';
                    emailInput.style.boxShadow = '0 0 15px rgba(57, 255, 20, 0.3)';
                    
                } else {
                    showNotification('‚ö†Ô∏è Formato de e-mail inv√°lido', 'error');
                }
            }
        }
        function createParticles() {
            const particles = document.querySelector('.particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                
                // Cores aleat√≥rias para as part√≠culas
                const colors = ['var(--neon-blue)', 'var(--neon-purple)', 'var(--neon-green)'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.background = color;
                particle.style.boxShadow = `0 0 10px ${color}`;
                
                particles.appendChild(particle);
            }
        }

        // Fun√ß√µes de modal
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Fun√ß√£o para mostrar loading
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        async function apiRequest(url, options = {}) {
            showLoading();
            try {
                await waitForFirebase();
                const user = firebase.auth().currentUser;
                if (!user) throw new Error('not-auth');
                const idToken = await user.getIdToken();
                const opts = { headers: {}, ...options };
                opts.headers['Authorization'] = `Bearer ${idToken}`;
                if (opts.body && typeof opts.body !== 'string') {
                    opts.headers['Content-Type'] = 'application/json';
                    opts.body = JSON.stringify(opts.body);
                }
                const res = await fetch(url, opts);
                if (!res.ok) throw new Error('api-error');
                return await res.json();
            } finally {
                hideLoading();
            }
        }

        // Simular opera√ß√µes ass√≠ncronas (legado)
        function simulateAsync(callback, delay = 2000) {
            showLoading();
            setTimeout(() => {
                hideLoading();
                callback();
            }, delay);
        }

        // Refazer entrevista
        function retakeInterview() {
            openModal('retakeModal');
        }

        function confirmRetake() {
            closeModal('retakeModal');
            apiRequest('/api/user/retake-interview', { method: 'POST' })
                .then(() => {
                    showNotification('üöÄ Redirecionando para nova entrevista...', 'info');
                    window.location.href = 'entrevista.html?retake=true';
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao acessar entrevista', 'error');
                });
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email.toLowerCase());
        }

        // Cancelar assinatura
        function cancelSubscription() {
            openModal('cancelModal');
        }

        function confirmCancel() {
            closeModal('cancelModal');
            apiRequest('/api/user/cancel-subscription', { method: 'POST' })
                .then(() => {
                    showNotification('‚úÖ Assinatura cancelada com sucesso!', 'success');
                    document.querySelector('.plan-badge').textContent = 'FREE MEMBER';
                    document.querySelector('.plan-badge').className = 'plan-badge';
                    document.querySelector('.plan-badge').style.background = 'linear-gradient(45deg, var(--bg-tertiary), var(--silver))';
                })
                .catch(() => {
                    showNotification('‚ùå Erro ao cancelar assinatura', 'error');
                });
        }

        // Verificar e-mail
        function verifyEmail() {
            openModal('emailModal');
            // Simular envio do c√≥digo
            setTimeout(() => {
                console.log('üìß C√≥digo de verifica√ß√£o enviado!');
            }, 500);
        }

        function confirmEmailVerification() {
            const code = document.querySelector('#emailModal input').value;
            if (code.length === 6) {
                closeModal('emailModal');
                simulateAsync(() => {
                    alert('‚úÖ E-mail verificado com sucesso!');
                }, 1000);
            } else {
                alert('‚ö†Ô∏è Digite um c√≥digo v√°lido de 6 d√≠gitos');
            }
        }

        // Excluir conta
        function deleteAccount() {
            // Primeiro, simular envio de c√≥digo de verifica√ß√£o
            showNotification('üìß Enviando c√≥digo de verifica√ß√£o para seu e-mail...', 'info');
            
            setTimeout(() => {
                openModal('deleteModal');
                showNotification('‚úÖ C√≥digo enviado! Verifique seu e-mail.', 'success');
            }, 1500);
        }

        // Upgrade da conta
        function upgradeAccount() {
            closeModal('upgradeModal');
            showNotification('üí≥ Redirecionando para upgrade...', 'info');
            
            setTimeout(() => {
                try {
                    // Aqui seria o redirecionamento para p√°gina de upgrade/pagamento
                    window.location.href = '/upgrade?source=account_management';
                } catch (error) {
                    showNotification('‚ùå Erro ao acessar p√°gina de upgrade', 'error');
                    console.error('Erro:', error);
                }
            }, 1500);
        }

        // Fun√ß√£o para detectar mudan√ßas n√£o salvas
        function trackUnsavedChanges() {
            const inputs = document.querySelectorAll('.form-input');
            let hasUnsavedChanges = false;
            
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    hasUnsavedChanges = true;
                    
                    // Destacar visualmente
                    this.style.borderColor = 'var(--neon-green)';
                    this.style.boxShadow = '0 0 15px rgba(57, 255, 20, 0.3)';
                    
                    // Mostrar indicador de mudan√ßas n√£o salvas
                    showUnsavedIndicator();
                });
            });
            
            // Avisar sobre mudan√ßas n√£o salvas ao sair da p√°gina
            window.addEventListener('beforeunload', function(e) {
                if (hasUnsavedChanges) {
                    e.preventDefault();
                    e.returnValue = 'Voc√™ tem altera√ß√µes n√£o salvas. Deseja realmente sair?';
                }
            });
        }

        function showUnsavedIndicator() {
            const indicator = document.getElementById('unsavedIndicator');
            if (!indicator) {
                const newIndicator = document.createElement('div');
                newIndicator.id = 'unsavedIndicator';
                newIndicator.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: linear-gradient(45deg, var(--neon-green), rgba(57, 255, 20, 0.8));
                    color: var(--bg-primary);
                    padding: 0.8rem 1.5rem;
                    border-radius: 25px;
                    font-weight: 600;
                    z-index: 1500;
                    animation: slideInBottom 0.3s ease;
                    box-shadow: 0 5px 15px rgba(57, 255, 20, 0.4);
                    font-family: 'Exo 2', sans-serif;
                `;
                newIndicator.innerHTML = '‚ö†Ô∏è Voc√™ tem altera√ß√µes n√£o salvas';
                document.body.appendChild(newIndicator);
                
                // Auto-hide ap√≥s 3 segundos
                setTimeout(() => {
                    if (document.body.contains(newIndicator)) {
                        newIndicator.style.animation = 'slideOutBottom 0.3s ease';
                        setTimeout(() => {
                            if (document.body.contains(newIndicator)) {
                                document.body.removeChild(newIndicator);
                            }
                        }, 300);
                    }
                }, 3000);
            }
        }

        // Adicionar anima√ß√µes para indicador
        const indicatorStyles = document.createElement('style');
        indicatorStyles.textContent = `
            @keyframes slideInBottom {
                from { transform: translateX(-50%) translateY(100px); opacity: 0; }
                to { transform: translateX(-50%) translateY(0); opacity: 1; }
            }
            
            @keyframes slideOutBottom {
                from { transform: translateX(-50%) translateY(0); opacity: 1; }
                to { transform: translateX(-50%) translateY(100px); opacity: 0; }
            }
        `;
        document.head.appendChild(indicatorStyles);

        // Fun√ß√£o para limpar indicadores visuais ap√≥s salvar
        function clearUnsavedIndicators() {
            document.querySelectorAll('.form-input').forEach(input => {
                input.style.borderColor = '';
                input.style.boxShadow = '';
            });
            
            const indicator = document.getElementById('unsavedIndicator');
            if (indicator) {
                document.body.removeChild(indicator);
            }
        }

        // Simula√ß√£o de loading melhorada
        function simulateAsync(callback, delay = 2000) {
            showLoading();
            
            // Simular progresso
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 10;
                console.log(`Processando... ${progress}%`);
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                }
            }, delay / 10);
            
            setTimeout(() => {
                hideLoading();
                clearUnsavedIndicators();
                callback();
            }, delay);
        }

        // Melhorias no sistema de notifica√ß√µes
        let notificationQueue = [];
        let isShowingNotification = false;

        function showNotification(message, type = 'info') {
            notificationQueue.push({ message, type });
            processNotificationQueue();
        }

        function processNotificationQueue() {
            if (isShowingNotification || notificationQueue.length === 0) return;
            
            isShowingNotification = true;
            const { message, type } = notificationQueue.shift();
            
            const colors = {
                success: 'var(--neon-green)',
                error: '#ff1744',
                warning: 'var(--neon-pink)',
                info: 'var(--neon-blue)'
            };
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, var(--glass-bg), rgba(0, 255, 255, 0.1));
                backdrop-filter: blur(20px);
                border: 1px solid ${colors[type] || colors.info};
                border-radius: 12px;
                padding: 1rem 1.5rem;
                color: var(--text-primary);
                font-family: 'Exo 2', sans-serif;
                font-weight: 600;
                z-index: 2000;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2);
                max-width: 350px;
                min-width: 250px;
                word-wrap: break-word;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.2rem;">${icons[type] || icons.info}</span>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    notification.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => {
                        if (document.body.contains(notification)) {
                            document.body.removeChild(notification);
                        }
                        isShowingNotification = false;
                        processNotificationQueue(); // Processar pr√≥xima notifica√ß√£o
                    }, 300);
                }
            }, 4000);
        }

        // Fun√ß√£o para verificar conectividade
        function checkConnectivity() {
            if (!navigator.onLine) {
                showNotification('üîå Voc√™ est√° offline. Algumas funcionalidades podem n√£o funcionar.', 'warning');
            }
        }

        // Event listeners para conectividade
        window.addEventListener('online', () => {
            showNotification('üåê Conex√£o restabelecida!', 'success');
        });

        window.addEventListener('offline', () => {
            showNotification('üîå Voc√™ ficou offline', 'warning');
        });

        function confirmDelete() {
            const password = document.querySelector('#deleteModal input[type="password"]').value;
            const code = document.querySelector('#deleteModal input[type="text"]').value;

            if (password.length > 0 && code.length === 6) {
                closeModal('deleteModal');
                apiRequest('/api/user/account', { method: 'DELETE', body: { password, code } })
                    .then(() => {
                        showNotification('‚ö†Ô∏è Conta exclu√≠da permanentemente!', 'error');
                        setTimeout(() => { window.location.href = '/login?account_deleted=true'; }, 2000);
                    })
                    .catch(() => {
                        showNotification('‚ùå Erro ao excluir conta', 'error');
                    });
            } else {
                alert('‚ö†Ô∏è Preencha todos os campos corretamente');
            }
        }

        // Valida√ß√£o em tempo real dos formul√°rios
        function setupFormValidation() {
            const inputs = document.querySelectorAll('.form-input');
            
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.checkValidity()) {
                        this.style.borderColor = 'var(--neon-green)';
                        this.style.boxShadow = '0 0 20px rgba(57, 255, 20, 0.3)';
                    } else {
                        this.style.borderColor = '#ff1744';
                        this.style.boxShadow = '0 0 20px rgba(255, 23, 68, 0.3)';
                    }
                });

                input.addEventListener('blur', function() {
                    this.style.borderColor = 'var(--glass-border)';
                    this.style.boxShadow = 'none';
                });
            });
        }

        // Efeitos de paralaxe suaves
        function setupParallax() {
            let ticking = false;
            
            function updateParallax() {
                const scrolled = window.pageYOffset;
                const parallax = document.querySelector('.background-particles');
                const speed = scrolled * 0.5;
                
                parallax.style.transform = `translateY(${speed}px)`;
                ticking = false;
            }
            
            function requestTick() {
                if (!ticking) {
                    requestAnimationFrame(updateParallax);
                    ticking = true;
                }
            }
            
            window.addEventListener('scroll', requestTick);
        }

        // Efeitos de hover nos cards
        function setupCardEffects() {
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) rotateX(5deg) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) rotateX(0) scale(1)';
                });
            });
        }

        // Efeito de digita√ß√£o no t√≠tulo
        function typewriterEffect() {
            const title = document.querySelector('.page-title');
            const text = title.textContent;
            title.textContent = '';
            
            let i = 0;
            const timer = setInterval(() => {
                title.textContent += text[i];
                i++;
                if (i >= text.length) {
                    clearInterval(timer);
                }
            }, 100);
        }

        // Anima√ß√£o de entrada dos cards
        function animateCardsOnLoad() {
            const cards = document.querySelectorAll('.card');
            
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(50px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200);
            });
        }

        // Fechar modal ao clicar fora
        function setupModalClickOutside() {
            const modals = document.querySelectorAll('.modal');
            
            modals.forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    }
                });
            });
        }

        // Adicionar efeitos sonoros (simulados com console)
        function playSound(type) {
            const sounds = {
                click: 'üîä *Click*',
                success: 'üîä *Success beep*',
                error: 'üîä *Error buzz*',
                warning: 'üîä *Warning tone*'
            };
            console.log(sounds[type] || 'üîä *Sound*');
        }

        // Adicionar eventos de som aos bot√µes
        function setupSoundEffects() {
            const buttons = document.querySelectorAll('.btn');
            
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    if (button.classList.contains('btn-danger')) {
                        playSound('warning');
                    } else if (button.classList.contains('btn-primary')) {
                        playSound('success');
                    } else {
                        playSound('click');
                    }
                });
            });
        }

        // Gerar c√≥digos de verifica√ß√£o aleat√≥rios (simula√ß√£o)
        function generateVerificationCode() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        // Sistema de notifica√ß√µes futuristas
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: 'var(--neon-green)',
                error: '#ff1744',
                warning: 'var(--neon-pink)',
                info: 'var(--neon-blue)'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, var(--glass-bg), rgba(0, 255, 255, 0.1));
                backdrop-filter: blur(20px);
                border: 1px solid ${colors[type] || colors.info};
                border-radius: 10px;
                padding: 1rem 1.5rem;
                color: var(--text-primary);
                font-family: 'Exo 2', sans-serif;
                font-weight: 600;
                z-index: 2000;
                animation: slideInRight 0.3s ease;
                box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2);
                max-width: 300px;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }

        // Adicionar CSS para anima√ß√µes de notifica√ß√£o
        const notificationStyles = document.createElement('style');
        notificationStyles.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(notificationStyles);

        // Inicializa√ß√£o quando a p√°gina carrega
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar conectividade inicial
            checkConnectivity();
            
            // Inicializar componentes
            createParticles();
            setupFormValidation();
            setupParallax();
            setupCardEffects();
            setupModalClickOutside();
            setupSoundEffects();
            updatePersonalizationStatus();
            trackUnsavedChanges();
            
            // Carregar dados do usu√°rio
            loadUserData();
            
            // Pequeno delay para efeitos visuais
            setTimeout(() => {
                typewriterEffect();
                animateCardsOnLoad();
            }, 500);
            
            // Easter egg: Konami code
            let konamiCode = [];
            const targetSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];
            
            document.addEventListener('keydown', function(e) {
                konamiCode.push(e.code);
                if (konamiCode.length > targetSequence.length) {
                    konamiCode.shift();
                }
                
                if (JSON.stringify(konamiCode) === JSON.stringify(targetSequence)) {
                    showNotification('üéÆ Konami Code ativado! Modo desenvolvedor habilitado!', 'success');
                    document.body.style.filter = 'hue-rotate(180deg)';
                    setTimeout(() => {
                        document.body.style.filter = 'none';
                    }, 3000);
                }
            });

            // Simula√ß√£o de dados do usu√°rio carregando
            setTimeout(() => {
                showNotification('üöÄ Sistema PROD.AI inicializado com sucesso!', 'success');
            }, 1000);
            
            // Auto-save a cada 30 segundos se houver mudan√ßas
            setInterval(autoSave, 30000);
        });

        async function loadUserData() {
            try {
                const profile = await apiRequest('/api/user/profile');
                const interview = await apiRequest('/api/user/interview-data');
                const sub = await apiRequest('/api/user/subscription');

                if (profile) {
                    userData.personalInfo.email = profile.email || '';
                    userData.personalInfo.phone = profile.phone || '';
                }
                if (interview) {
                    Object.assign(userData.interviewData, interview);
                }
                if (sub) {
                    userData.userType = sub.plan === 'plus' ? 'PLUS' : 'FREE';
                }
                updateUIWithUserData();
            } catch (err) {
                console.error('Erro ao carregar dados', err);
                loadUserDataFromStorage();
            }
        }

        // Fun√ß√£o para carregar dados do usu√°rio salvos localmente
        function loadUserDataFromStorage() {
            try {
                const savedData = localStorage.getItem('prodai_user_data');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    // Mesclar com dados padr√£o
                    Object.assign(userData, parsedData);
                    
                    // Atualizar interface com dados carregados
                    updateUIWithUserData();
                }
            } catch (error) {
                console.log('Erro ao carregar dados salvos:', error);
            }
        }

        // Fun√ß√£o para atualizar interface com dados do usu√°rio
        function updateUIWithUserData() {
            // Atualizar e-mail
            const emailInput = document.getElementById('emailInput');
            if (emailInput && userData.personalInfo.email) {
                emailInput.value = userData.personalInfo.email;
            }
            
            // Atualizar dados da entrevista
            Object.keys(userData.interviewData).forEach(key => {
                const element = document.querySelector(`[data-field="${key}"]`);
                if (element) {
                    element.textContent = userData.interviewData[key];
                }
            });
        }

        // Auto-save funcionalidade
        function autoSave() {
            const hasChanges = document.querySelector('#unsavedIndicator');
            if (hasChanges && navigator.onLine) {
                console.log('üîÑ Auto-save executado...');
                // Aqui seria a chamada real para salvar no backend
                // N√£o mostrar notifica√ß√£o para n√£o incomodar o usu√°rio
            }
        }

        // Fun√ß√£o para salvar dados localmente
        function saveUserDataToStorage() {
            try {
                localStorage.setItem('prodai_user_data', JSON.stringify(userData));
            } catch (error) {
                console.log('Erro ao salvar dados localmente:', error);
            }
        }

        // Atualizar todas as fun√ß√µes de save para tamb√©m salvar localmente
        const originalSavePersonalization = savePersonalization;
        savePersonalization = function() {
            originalSavePersonalization();
            saveUserDataToStorage();
        };

        const originalSavePersonalInfo = savePersonalInfo;
        savePersonalInfo = function() {
            originalSavePersonalInfo();
            saveUserDataToStorage();
        };

        // Melhorar feedback visual para campos obrigat√≥rios
        function highlightRequiredFields() {
            const requiredFields = document.querySelectorAll('input[required], textarea[required]');
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = 'var(--neon-pink)';
                    field.style.boxShadow = '0 0 10px rgba(255, 107, 157, 0.3)';
                }
            });
        }

        // Fun√ß√£o para debug (modo desenvolvedor)
        function enableDebugMode() {
            console.log('üîß Modo debug ativado');
            console.log('Dados do usu√°rio:', userData);
            
            // Adicionar indicadores visuais
            document.querySelectorAll('.card').forEach((card, index) => {
                card.style.border = '2px dashed var(--neon-green)';
                card.setAttribute('data-debug', `Card ${index + 1}`);
            });
            
            showNotification('üîß Modo debug ativado - Verifique o console', 'info');
        }

        // Fun√ß√£o para voltar ao chat
        function backToChat() {
            showNotification('üöÄ Retornando ao chat...', 'info');
            playSound('click');
            
            // Verificar se h√° mudan√ßas n√£o salvas
            const hasUnsavedChanges = document.getElementById('unsavedIndicator');
            
            if (hasUnsavedChanges) {
                const confirmReturn = confirm('‚ö†Ô∏è Voc√™ tem altera√ß√µes n√£o salvas. Deseja salvar antes de voltar ao chat?');
                
                if (confirmReturn) {
                    // Tentar salvar automaticamente
                    autoSaveAllChanges(() => {
                        // Ap√≥s salvar, redirecionar
                        redirectToChat();
                    });
                } else {
                    redirectToChat();
                }
            } else {
                redirectToChat();
            }
        }

        function redirectToChat() {
            setTimeout(() => {
                try {
                    // Redirecionar para a p√°gina principal do chat
                    window.location.href = '/chat';
                } catch (error) {
                    // Fallback: tentar voltar para p√°gina anterior
                    if (window.history.length > 1) {
                        window.history.back();
                    } else {
                        window.location.href = '/';
                    }
                }
            }, 500);
        }

        // Fun√ß√£o para salvar todas as mudan√ßas automaticamente
        function autoSaveAllChanges(callback) {
            showLoading();
            
            simulateAsync(() => {
                // Salvar personaliza√ß√£o se for PLUS
                if (userData.userType === 'PLUS') {
                    saveUserDataToStorage();
                }
                
                // Salvar informa√ß√µes pessoais
                const email = document.getElementById('emailInput').value;
                if (email && validateEmail(email)) {
                    userData.personalInfo.email = email;
                }
                
                const phone = document.querySelector('#personalCard input[type="tel"]').value;
                userData.personalInfo.phone = phone;
                
                saveUserDataToStorage();
                showNotification('‚úÖ Altera√ß√µes salvas automaticamente!', 'success');
                
                if (callback) callback();
            }, 1000);
        }
        window.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                enableDebugMode();
            }
        });

        // Fun√ß√£o para detectar performance e ajustar efeitos
        function optimizePerformance() {
            const connection = navigator.connection;
            if (connection && connection.effectiveType === '2g') {
                // Reduzir part√≠culas em conex√µes lentas
                document.querySelector('.background-particles').style.display = 'none';
                console.log('üîß Modo de economia de dados ativado');
            }
        }

        // Verificar performance na inicializa√ß√£o
        optimizePerformance();
    </script>

    
</body>
</html>
